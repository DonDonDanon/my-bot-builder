<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä Telegram-–±–æ—Ç–æ–≤</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
        }
        .step {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        input, textarea {
            width: 100%;
            padding: 10px;
            margin: 10px 0;
            border: 1px solid #ced4da;
            border-radius: 4px;
            box-sizing: border-box;
        }
        button {
            background: #007bff;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            transition: background 0.3s;
        }
        button:hover {
            background: #0056b3;
        }
        .command {
            margin-bottom: 15px;
        }
        #status {
            margin-top: 10px;
            color: #28a745;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <h1>üõ†Ô∏è –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä Telegram-–±–æ—Ç–æ–≤</h1>
    
    <div class="step">
        <h2>–®–∞–≥ 1: –ü–æ–ª—É—á–∏—Ç–µ —Ç–æ–∫–µ–Ω –±–æ—Ç–∞</h2>
        <p>
            1. –û—Ç–∫—Ä–æ–π—Ç–µ <a href="https://t.me/BotFather" target="_blank">@BotFather</a> –≤ Telegram.<br>
            2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—É <code>/newbot</code>.<br>
            3. –í—Å—Ç–∞–≤—å—Ç–µ –ø–æ–ª—É—á–µ–Ω–Ω—ã–π —Ç–æ–∫–µ–Ω:
        </p>
        <input type="text" id="token" placeholder="–ü—Ä–∏–º–µ—Ä: 123456:ABC-DEF1234ghIkl-zyx57W2v1u123ew11">
    </div>

    <div class="step">
        <h2>–®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–º–∞–Ω–¥</h2>
        <div id="commands">
            <div class="command">
                <input type="text" placeholder="–ö–æ–º–∞–Ω–¥–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, /start)" class="command-trigger">
                <textarea placeholder="–û—Ç–≤–µ—Ç –±–æ—Ç–∞..." class="command-response" rows="3"></textarea>
            </div>
        </div>
        <button onclick="addCommand()">+ –î–æ–±–∞–≤–∏—Ç—å –∫–æ–º–∞–Ω–¥—É</button>
    </div>

    <div class="step">
        <h2>–®–∞–≥ 3: –ê–∫—Ç–∏–≤–∞—Ü–∏—è</h2>
        <button onclick="saveBot()">üöÄ –°–æ–∑–¥–∞—Ç—å –±–æ—Ç–∞</button>
        <p id="status"></p>
    </div>

    <script>
        // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–π –∫–æ–º–∞–Ω–¥—ã
        function addCommand() {
            const newCommand = document.createElement('div');
            newCommand.className = 'command';
            newCommand.innerHTML = `
                <input type="text" placeholder="–ö–æ–º–∞–Ω–¥–∞" class="command-trigger">
                <textarea placeholder="–û—Ç–≤–µ—Ç –±–æ—Ç–∞..." class="command-response" rows="3"></textarea>
            `;
            document.getElementById('commands').appendChild(newCommand);
        }

        // –ó–∞–≥–ª—É—à–∫–∞ –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
    async function saveBot() {
    const token = document.getElementById('token').value;
    const commands = Array.from(document.querySelectorAll('.command')).map(cmd => ({
        trigger: cmd.querySelector('.command-trigger').value,
        response: cmd.querySelector('.command-response').value
    }));

    // –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ –≤ Supabase
    const response = await fetch('https://rjkqoxcwgrejkwrqqntc.supabase.co/rest/v1/bots', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
            'apikey': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJqa3FveGN3Z3Jlamt3cnFxbnRjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Mzg0ODExNjIsImV4cCI6MjA1NDA1NzE2Mn0._4P8Jw4J0bx4VJq8q5BCfBbkbTkDKVlNjkNrfAM-LuQ',
        },
        body: JSON.stringify({
            bot_token: token,
            commands: commands
        })
    });

    if (response.ok) {
        document.getElementById('status').textContent = "‚úÖ –ë–æ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω! –°–∫–æ—Ä–æ –∞–∫—Ç–∏–≤–∏—Ä—É–µ–º...";
    } else {
        document.getElementById('status').textContent = "‚ùå –û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è";
    }
}
    </script>
</body>
</html>
